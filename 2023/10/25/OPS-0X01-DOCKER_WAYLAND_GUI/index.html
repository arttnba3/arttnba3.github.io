

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png">
  <link rel="icon" href="/img/avatar.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="arttnba3">
  <meta name="keywords" content="">
  
    <meta name="description" content="è¿™ä¸€æ—¥ï¼ŒDocker å†å…¥æ¡Œé¢ GUI å¢ƒç•Œ">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€OPS.0x01ã€‘ä¸º Docker è¿æ¥ Wayland å›¾å½¢ç¯å¢ƒ">
<meta property="og:url" content="https://arttnba3.github.io/2023/10/25/OPS-0X01-DOCKER_WAYLAND_GUI/index.html">
<meta property="og:site_name" content="arttnba3&#39;s blog">
<meta property="og:description" content="è¿™ä¸€æ—¥ï¼ŒDocker å†å…¥æ¡Œé¢ GUI å¢ƒç•Œ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/10/25/4nrEeVhf876YtAC.png">
<meta property="article:published_time" content="2023-10-24T17:02:45.000Z">
<meta property="article:modified_time" content="2024-02-22T19:31:40.000Z">
<meta property="article:author" content="arttnba3">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="è¿ç»´">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="GUI">
<meta property="article:tag" content="Wayland">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://s2.loli.net/2023/10/25/4nrEeVhf876YtAC.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>ã€OPS.0x01ã€‘ä¸º Docker è¿æ¥ Wayland å›¾å½¢ç¯å¢ƒ - arttnba3&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"arttnba3.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"Â§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 80vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>arttnba3&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/atom.xml">
                <i class="iconfont icon-rss"></i>
                rss
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://s2.loli.net/2023/10/25/fKS5bQUizjakCAr.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ã€OPS.0x01ã€‘ä¸º Docker è¿æ¥ Wayland å›¾å½¢ç¯å¢ƒ"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-25 04:02" pubdate>
          2023å¹´10æœˆ25æ—¥ å‡Œæ™¨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.9k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          49 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">ã€OPS.0x01ã€‘ä¸º Docker è¿æ¥ Wayland å›¾å½¢ç¯å¢ƒ</h1>
            
              <p class="note note-info">
                
                  
                    æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2024å¹´2æœˆ23æ—¥ æ—©ä¸Š
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <p>è¿™ä¸€æ—¥ï¼ŒDocker å†å…¥æ¡Œé¢ GUI å¢ƒç•Œ</p>
<span id="more"></span>

<h1 id="0x00-ä¸€åˆ‡å¼€å§‹ä¹‹å‰"><a href="#0x00-ä¸€åˆ‡å¼€å§‹ä¹‹å‰" class="headerlink" title="0x00. ä¸€åˆ‡å¼€å§‹ä¹‹å‰"></a>0x00. ä¸€åˆ‡å¼€å§‹ä¹‹å‰</h1><blockquote>
<p>å¦‚æœä½ åªæ˜¯å¯»æ±‚ docker æ¥é€š Wayland è·‘å›¾å½¢ç•Œé¢çš„è§£å†³æ–¹æ¡ˆï¼Œä¸æƒ³çœ‹ç¬”è€…åæ§½çš„å„ç§æ‰¹è¯ï¼Œè¯·ç›´æ¥è·³è¿‡è¿™ä¸€å°èŠ‚ ï¼šï¼‰</p>
<p>å¦‚æœä½ æƒ³è¦çš„æ˜¯ docker æ¥é€šæ˜¾å¡çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä½ èµ°é”™è·¯äº†ï¼Œè¿™ä¸ªæ–¹æ¡ˆåœ¨<a target="_blank" rel="noopener" href="https://arttnba3.cn/2023/08/31/OPS-0X00-DOCKER_ON_SERVER/#0x02-%E5%88%9B%E5%BB%BA%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E6%98%BE%E5%8D%A1%E7%9A%84-docker-%E7%8E%AF%E5%A2%83">éš”å£</a></p>
</blockquote>
<p>ç¬”è€…å¤§ä¸€åˆšå¼€å§‹å­¦ Pwn çš„æ—¶å€™å°±å› ç¯å¢ƒé—®é¢˜è€Œæ„Ÿåˆ°è‹¦æ‰‹ï¼Œä¸Šä¸€é¢˜çš„ç¯å¢ƒå¯èƒ½æ˜¯ <code>Ubuntu 16.04</code> å¸¦ä¸ª <code>glibc-2.23</code> åªæœ‰ <code>fastbin</code>ï¼Œä¸‹ä¸€é¢˜å¯èƒ½åˆå˜æˆ <code>Ubuntu 18.04</code> å¸¦ä¸ª <code>glibc-2.27</code> åˆå¤šä¸€ä¸ª <code>tcache</code> ï¼Œç„¶åç¬”è€…æœ¬åœ°ç¯å¢ƒåˆæ˜¯ <code>Ubuntu 20.04</code> å¸¦ä¸ª <code>glibc-2.31</code> çš„åŒæ—¶ <code>tcache</code> åˆå¤šå¸¦ä¸€ä¸ª keyï¼Œå¯¹äºé‚£æ—¶å€™ä»¥ glibc heap åˆ©ç”¨ä½œä¸ºä¸»æµçš„ Pwn é¢˜è€Œè¨€è‹¥æ˜¯æœ¬åœ° libc ç‰ˆæœ¬ä¸åŒåˆ™æ ¹æœ¬æ²¡æœ‰åŠæ³•å¾ˆå¥½åœ°è°ƒè¯•å¥½æ‰“è¿œç¨‹</p>
<p>é€šè¿‡ <code>LD_PRELOAD</code> å‚æ•°åœ¨ç¨‹åºæ‰§è¡Œå‰ <em>é¢„å…ˆåŠ è½½ libc</em> æˆ–è®¸æŸäº›ç¨‹åº¦ä¸Šæ˜¯ä¸€ä¸ªå¯è¡Œçš„åŠæ³•ï¼Œè‡³å°‘ libc å¤§ç‰ˆæœ¬ç›¸åŒçš„æƒ…å†µä¸‹è½½å…¥ä¸åŒçš„å°ç‰ˆæœ¬åŸºæœ¬ä¸Šæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯ç”±äºä¸åŒç³»ç»Ÿç¯å¢ƒä¸­ ld ç‰ˆæœ¬ä¸åŒçš„ç¼˜æ•…ï¼Œå¯¹äºè·¨ ld ç‰ˆæœ¬åŠ è½½ä¸åŒç‰ˆæœ¬çš„ libc åˆ™åˆå¯èƒ½ç›´æ¥ segmentation fault äº†</p>
<p>è™½ç„¶ Linux çš„ç”¨æˆ·ç¯å¢ƒå¹¶ä¸ä¼¼ Windows é‚£æ ·æœ‰ç€å¼ºå£®çš„äºŒè¿›åˆ¶å‰å‘å…¼å®¹æ€§ï¼Œä½†æ˜¯ç”¨æˆ·ç¯å¢ƒä¾æ‰˜äºå†…æ ¸ç¯å¢ƒã€ä¾æ‰˜äºå†…æ ¸å‘ç”¨æˆ·æ€æš´éœ²çš„æ¥å£â€”â€”ç³»ç»Ÿè°ƒç”¨ï¼Œè€Œè¿™å¹¶ä¸æ˜¯ä¼šè½»æ˜“å‘ç”Ÿå˜åŠ¨ä»¥åŠå…¼å®¹æ€§ç ´åçš„ä¸€ä¸ªä¸œè¥¿ï¼Œç”±æ­¤ï¼Œé€šè¿‡<strong>é‡æ–°å¼€è¾Ÿä¸€ä¸ªå¯¹åº”çš„æ–°çš„ç”¨æˆ·ç¯å¢ƒçš„æ–¹å¼</strong>â€”â€” å³å½¢å¦‚ <code>Docker</code> è¿™æ ·çš„<strong>æ“ä½œç³»ç»Ÿå±‚ä¸Šçš„è™šæ‹ŸåŒ–æ–¹æ¡ˆ</strong>ï¼Œæˆ‘ä»¬ä¾¿èƒ½éå¸¸ç®€å•åœ°æ­å»ºä¸åŒçš„ Pwn é¢˜æ‰€å¯¹åº”çš„åŸå§‹ç¯å¢ƒ</p>
<blockquote>
<p><del>å½“ç„¶ï¼Œè¿™é‡Œå°±ä¸å¾—ä¸æ<a target="_blank" rel="noopener" href="https://arttnba3.cn/2021/05/20/PIECES-0X00-SHELL_OUTSIDE-0-LOST_UMBRELLA/#arttnba3-arttnba3-cn-x2F-cat-flag">æŸäº›è¿ libc éƒ½ä¸ç»™çš„æ˜¯äººæ˜¯é¬¼å…¨é çŒœçš„æ¯”èµ›</a>çš„å«é‡‘é‡äº†</del></p>
</blockquote>
<p>ä½†æ˜¯ Docker ä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯<strong>é»˜è®¤æ˜¯æ²¡æœ‰å›¾å½¢ç¯å¢ƒçš„</strong>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æ²¡æ³•ç›´æ¥åœ¨ Docker å½“ä¸­è¿è¡Œ GUI ç¨‹åºï¼Œå¯¹äºéœ€è¦å¤æ‚å †é£æ°´ç­‰å¤šæ¬¡è°ƒè¯•çš„ Pwn é¢˜ç›®è€Œè¨€åˆ™æ²¡åŠæ³•åƒç›´æ¥è¿è¡Œåœ¨ä¸»æœºä¸Šé‚£æ ·ç›´æ¥é€šè¿‡ <code>gdb.attach()</code> å¼¹ä¸€ä¸ªä¼ªç»ˆç«¯çª—å£å‡ºæ¥ï¼š</p>
<p><img src="https://s2.loli.net/2023/10/24/ogN4EqIUx9TVm6u.jpg" srcset="/img/loading.gif" lazyload alt="æ„Ÿè§‰ä¸å¦‚ lldb"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tmux/tmux/wiki">TMUX</a> ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ docker ä¸­çš„å¤šç»ˆç«¯è§£å†³æ–¹æ¡ˆï¼Œå½“ä½ åœ¨ tmux ä¸­è¿è¡Œ exploit æ‰§è¡Œåˆ° <code>gdb.attach()</code> è¿™æ ·éœ€è¦ä¸€ä¸ªæ–°ç»ˆç«¯çš„å‘½ä»¤æ—¶ï¼Œtmux å¯ä»¥æ— ç¼åˆ†å‰²å‡ºä¸€ä¸ªæ–°çš„çª—å£ï¼Œé€šè¿‡é¢å¤–æŒ‡å®š pwntools ä¸­çš„ <code>context.terminal</code> ç¯å¢ƒå˜é‡å¯ä»¥æ§åˆ¶æ–°çª—å£çš„åˆ†å‰²ä½ç½®ï¼š</p>
<p><img src="https://s2.loli.net/2023/10/24/i2XEPgZGlVse1W8.jpg" srcset="/img/loading.gif" lazyload alt="æ˜¯æ–°ç»ˆç«¯å—ï¼Ÿå¦‚æ–°"></p>
<p>ä½†æ˜¯ tmux çš„ç¿»é¡µæ‰‹æ„Ÿç»ˆç©¶æ˜¯å·®ç‚¹æ„æ€ï¼Œä¸åƒå›¾å½¢åŒ–ç•Œé¢é‚£æ ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨æ»šè½®æ»šæ¥æ»šå»ï¼ŒåŒæ—¶åŸºäº GUI çª—å£çš„è·¨è¡Œæ–‡æœ¬å¤åˆ¶ä¹Ÿä¼šè·¨å¤šä¸ª tmux çª—å£ï¼Œæ‰“ç ´äº†ä¸åŒçª—å£çš„éš”ç¦»æ€§ï¼š</p>
<p><img src="https://s2.loli.net/2024/02/23/YJ6XD1qxU8jaVw2.png" srcset="/img/loading.gif" lazyload alt="æ›´é‡è¦çš„ä¸€ç‚¹æ˜¯ç¬”è€…å½“æ—¶éå¸¸ sb è®¤ä¸º tmux ä¸èƒ½ç¿»é¡µï¼Œåé¢æ‰çŸ¥é“ ctrl+b åæŒ‰ä¸‹ [ å°±èƒ½é€šè¿‡ PgUp å’Œ PgDn ç¿»é¡µ]"></p>
<p>ç¬”è€…å½“å¹´çš„è§£å†³æ–¹æ¡ˆæ˜¯ç›´æ¥å¼€å¤šä¸ªè™šæ‹Ÿæœºï¼Œä½†ç”¨èµ·æ¥æ€»æ„Ÿè§‰å·®ç‚¹æ„æ€ä¸è¯´ï¼Œè¿˜å ç”¨äº†å¤§é‡çš„ç‰©ç†ç£ç›˜ç©ºé—´â€”â€”ç¬”è€…æœ¬ç§‘é˜¶æ®µå‰ä¸¤å¹´æ‰€ç”¨çš„ç”µè„‘æ˜¯<strong>æœºèº«åªæ­è½½äº†ä¸€å— 512GB SSD çš„ surface book 2</strong>â€”â€”ä¸ºä»€ä¹ˆè¿™é‡Œè¦ç‰¹åˆ«è®²ä¸€ä¸‹è¿™ä¸ªæœºå‹å¹¶ä¸æ˜¯å› ä¸ºç¬”è€…æƒ³è¦ç‚«å¯Œï¼Œè™½ç„¶è¯´ä»ä»·æ ¼è€Œè¨€ surface ç³»ç»Ÿäº§å“å’Œ MacBook ç³»åˆ—äº§å“ä¸€æ ·åŒå±ä»·æ ¼æé«˜æ€§ä»·æ¯”æä½çš„â€œé«˜ç«¯äº§å“â€ï¼Œä½†ç¬”è€…å½“æ—¶æ˜¯åœ¨æŸæµ·é²œå¸‚åœºä¹°çš„å¯èƒ½å¤§äºäºŒæ‰‹çš„æœºå­ï¼Œæ‰€ä»¥å…¶å®æ²¡æœ‰èŠ±å¤ªå¤šé’±ï¼Œä½†å’Œ MacBook ä¸€æ ·çš„æ˜¯ surface å…¨ç³»åˆ—äº§å“<strong>æ²¡æœ‰åŠæ³•è‡ªè¡Œæ›´æ¢åŒ…æ‹¬å†…å­˜ä¸ç¡¬ç›˜åœ¨å†…çš„ä»»ä½•éƒ¨ä»¶</strong>ï¼Œè€Œå³ä¾¿æ˜¯åœ¨æµ·é²œå¸‚åœºå¯»å®çš„æƒ…å†µä¸‹ç¬”è€…ä¹Ÿä¹°ä¸èµ·æ›´å¤§å®¹é‡çš„ç‰ˆæœ¬ï¼Œå†åŠ ä¸Šç¬”è€…å½“æ—¶é™¤äº†æ˜¯ä¸ªè®¡ç®—æœºç§‘å­¦çˆ±å¥½è€…ä»¥åŠç½‘ç»œç©ºé—´å®‰å…¨ä¸“ä¸šæœ¬ç§‘ç”Ÿçš„èº«ä»½ä»¥å¤–è¿˜æ˜¯åŠä¸ªç”»å¸ˆåŠ åå…­åˆ†ä¹‹ä¸€ä¸ªå¹³é¢è®¾è®¡å¸ˆï¼ˆå½“ç„¶ç°åœ¨å·²ç»ä¸æ˜¯æœ¬ç§‘ç”Ÿäº†ï¼‰ï¼Œè£…ä¸ª visual studio åŠ ä¸ª matlab åŠ ä¸Š jetbrains å…¨å®¶æ¡¶å†è£…ä¸ª adobe åŠå®¶æ¡¶ï¼ˆä¸»è¦å°±ç”¨ PS å’Œ AI è¿˜æœ‰ä¸ªå‰ªè§†é¢‘çš„å«å•¥ğŸ‘´å·²ç»è®°ä¸å¾—äº†ï¼‰å°±å·²ç»æŠŠç¡¬ç›˜å¡«å¾—æ»¡æ»¡å½“å½“çš„äº†ï¼Œå„ç§æ‚ä¸ƒæ‚å…«çš„èµ„æ–™ç…§ç‰‡éŸ³ä¹è§†é¢‘å•¥çš„åˆè¦åƒæ‰å°‘è¯´å‡ å GBï¼Œè¿™ä¸ªæ—¶å€™å†å¡å‡ ä¸ªå¹³å‡åå‡  GB çš„å„ç§è™šæ‹Ÿæœºï¼ˆä¸»åŠ›è™šæ‹Ÿæœºæ‰€å ç”¨çš„ç¡¬ç›˜ç©ºé—´è¶…è¿‡100GBï¼‰æ— ç–‘æ›´æ˜¯è®©æœ¬å°±ä¸å¯Œè£•çš„ <strong>512GB SSD</strong> é›ªä¸ŠåŠ éœœ</p>
<blockquote>
<p>è€Œç¬”è€…ä¸ºä»€ä¹ˆé€‰æ‹©ä¹°è¿™æ ·ä¸€å°ä¸­çœ‹ä¸ä¸­ç”¨çš„ç”µè„‘æ˜¯å› ä¸ºåœ¨åˆä¸­çš„æ—¶å€™ç¬”è€…çœ‹ä¸€æœ¬ä¸çŸ¥é“å«å•¥çš„ç”µå­ç¡¬ä»¶ç›¸å…³çš„æ‚å¿—ä¸­çœ‹åˆ° <code>surface book</code> çš„ <em>å±å¹•é”®ç›˜å¯åˆ†ç¦»ã€ç‹¬æ˜¾æ”¾ç½®åœ¨é”®ç›˜ä¸­</em> çš„è¿™æ ·ä¸€ä¸ªå‰æ‰€æœªæœ‰çš„è§£å†³æ–¹æ¡ˆæ„Ÿåˆ°ååˆ†æƒŠäººåŠ éå¸¸çš„å¸…æ°”ï¼Œäºæ˜¯å°±ä¸€ç›´å¿ƒå¿ƒå¿µå¿µæƒ³è¦ä¹°ä¸€å°è¿™æ ·çš„æœ¬å­ï¼Œé«˜ä¸­æ—¶æœŸç¬”è€…æ¢è¿‡ä¸‰å°ä¸åŒçš„å¹³æ¿ç”µè„‘äºŒåˆä¸€äº§å“ï¼ˆå½“ç„¶ï¼Œéƒ½æ˜¯ä»æŸæµ·é²œå¸‚åœºæ·˜æ¥çš„ï¼Œä¸”åŸºæœ¬ä¸Šæ˜¯å–äº†ä¸Šä¸€å°æ‰ä¹°ä¸‹ä¸€å°ï¼‰ï¼Œå…¶ä¸­ç¬¬ä¸€å°æ˜¯ surface 3 è€Œç¬¬ä¸‰å°æ˜¯ surface pro 3ï¼Œå½“æ—¶çš„ä¸»è¦ç”¨é€”æ˜¯æ‹¿æ¥æ—¥å¸¸åˆ·åˆ· OI ã€å†™ç‚¹å°è¯´ <del>ï¼ˆé‚£ä¹ˆè¿™é‡Œå°±ä¸å¾—ä¸ç®€å•å¸®å¿™æ¨å¹¿ä¸€ä¸‹æŸä¸çŸ¥åå¢¨å§“ä½œå®¶æ‰€å†™çš„<a target="_blank" rel="noopener" href="https://www.qidian.com/book/1027074530/">ã€Šä»é›¶å¼€å§‹çš„ CTFer ç”Ÿæ´»ã€‹</a> è¿™éƒ¨å°è¯´äº†è™½ç„¶ä¸€ç›´åœ¨å’•å’•å’•ï¼‰</del> ç©ä¸€äº›è½»é‡æ¸¸æˆï¼Œä½“æ„Ÿå…¶å®è¿˜è¡Œ</p>
<blockquote>
<p>å½“ç„¶ç°åœ¨å¾®è½¯çš„ surface ç³»åˆ—äº§å“å·²ç»èƒ½å¤Ÿåˆæ­¥åœ°è‡ªè¡Œæ›´æ¢ç¡¬ç›˜ï¼Œè™½ç„¶æ˜¯å……æ»¡æ§½ç‚¹çš„ <code>2230</code> è§„æ ¼ï¼Œä½†æ˜¯å’Œéš”å£æŸæ°´æœå“ç‰Œç›¸æ¯”å·²ç»å¥½å¾—ä¸å¾—äº†äº†</p>
<blockquote>
<p>ä½†æ˜¯å„é¡¹æ€§èƒ½åˆè¢«éš”å£ç§’æˆæ¸£æ¸£äº†ï¼Œå¾®è½¯ä½ åœ¨å¹²ä»€ä¹ˆå•Šå¾®è½¯ï¼ˆæ¼ï¼‰</p>
<p><del>ä½†å…¶å®ä»”ç»†ä¸€æƒ³è¿™ä¸åº”è¯¥æ˜¯Intelçš„é”…ä¹ˆï¼Œwintelè”ç›Ÿä¾æ‰˜ç­”è¾©äº†ğŸ‘Š</del></p>
</blockquote>
</blockquote>
<p>ä»¥åŠ surface ç³»ç»Ÿäº§å“ä¸€ç›´æœ‰ä¸€ä¸ªå™±å¤´å°±æ˜¯æœ‰ä¸ªè§¦æ§ç¬”å¯ä»¥ç”»ç”»ï¼Œä¹Ÿå°±æ˜¯è‡ªå¸¦æ•°ä½å±ï¼Œè¿™ä¹Ÿæ˜¯è¿™ä¸ªäº§å“ä¸€ç›´ä»¥æ¥æœ€å¸å¼•ç¬”è€…çš„ä¸€ç‚¹ï¼Œè™½ç„¶å¾®è½¯æœ€åˆç»™å¤§å®¶å‘ˆä¸Šæ¥çš„åªæ˜¯ä¸€å¨é—»ç€é¦™åƒç€è‡­çš„ç­”è¾©ï¼Œä½†ç¬”è€…ä¸€ç›´å¸Œæœ›éšç€äº§å“ä¸æ–­è¿­ä»£ï¼Œå¾®è½¯èƒ½å¤ŸæŠŠè¿™ä¸ªåŠŸèƒ½ç»™çœŸæ­£åšå¥½ï¼Œå°±ç®—è¾¾ä¸åˆ° wacom ä¸Šä¸‡å—é’±çš„æ•°ä½å±ç›¸çš„é«˜åº¦è‡³å°‘ä¹Ÿè¦å’Œå›½äº§çš„ä¸€åƒå‡ºå¤´çš„æ•°ä½å±æ°ä¸ªæ‰‹è…•çš„ç¨‹åº¦ï¼Œå¯æƒœ<strong>å“ªæ€•æ˜¯ä¸€ç›´åˆ°ä»Šå¤©æœ€æ–°çš„ surface pro 9 è¿™ä¸€ä»£äº§å“ï¼Œå…¶ç»˜ç”»æ‰‹æ„Ÿä¾æ—§æ¯”ä¸è¿‡å‡ åƒå—é’±çš„ iPad ï¼Œç”šè‡³æ¯”ä¸è¿‡200å—å‡ºå¤´çš„å›½äº§æ•°ä½æ¿</strong>ï¼ˆå½“ç„¶ç¬”è€…åªä¹°äº† surface pro 8 æ²¡æœ‰ä¹° surface pro 9 å› ä¸ºå¾®è½¯éå¸¸ SB åœ°æŠŠ 3.5mm è€³æœºæ¥å£è¿™ä¸ªå¤©é¡¶æ˜Ÿç§‘æŠ€ç»™ç æ‰äº†å¹¶ä¸”æ€§èƒ½å’Œç»­èˆªå’Œ 8 ä»£ç›¸æ¯”å¹¶æ²¡æœ‰ä»€ä¹ˆæå‡ç®€è€Œè¨€ä¹‹åˆæ˜¯æŒ¤ç‰™è†çš„ä¸€ä»£ï¼Œä½†ç¬”è€…æœ‰å»å¾®è½¯çº¿ä¸‹é—¨åº—äº²è‡ªå°è¯•è¿‡æœ€æ–°ä¸€ä»£ï¼Œç»˜ç”»æ‰‹æ„Ÿä¾æ—§ä¸€å¨ç­”è¾©ï¼‰</p>
</blockquote>
<p>è™½ç„¶ surface book 2 æ— æ³•æ›´æ¢ç¡¬ç›˜çš„ç‰¹æ€§è®©ç¬”è€…éå¸¸ç—›è‹¦ï¼Œä½†ä»”ç»†æƒ³æ¥è¿˜æ˜¯è€ç½—çš„é‚£å¥åè¨€â€”â€”<code>åˆä¸æ˜¯ä¸èƒ½ç”¨</code>ï¼Œç¡¬ç›˜ç©ºé—´æƒ³åŠæ³•è…¾ä¸€è…¾å¤šå¼€å¥½å‡ ä¸ªè™šæ‹Ÿæœºå…¶å®æ²¡ä»€ä¹ˆä¸å¥½ï¼Œæ¯•ç«Ÿçœå»äº†æŠ˜è…¾ docker çš„éº»çƒ¦å°±ä¸€ä¸‡ä¸ªå€¼ï¼Œäºæ˜¯ç¬”è€…æ—¥æ¸ä¹ æƒ¯æ¯å¤©åœ¨ä¸åŒè™šæ‹Ÿæœºä¹‹é—´è·³æ¥è·³å»</p>
<p><img src="https://cdn.jsdelivr.net/gh/rat3bant/BlogPic@master/20231125222853.png" srcset="/img/loading.gif" lazyload alt="ä½ çŸ¥é“æˆ‘è¦è¯´ä»€ä¹ˆ.png"></p>
<p>ä¸è¿‡è¿™ä¸ªé—®é¢˜å¹¶æ²¡æœ‰æŠ˜ç£¨ç¬”è€…å¤ªé•¿çš„æ—¶é—´ï¼Œåœ¨ç©äº†å°†è¿‘ä¸€ä¸ªå­¦æœŸçš„ç”¨æˆ·æ€ Pwn å­¦äº†å„ç§ä¸åŒçš„ house ä¹‹åç¬”è€…æ„Ÿè§‰ glibc pwn åœ¨æŠ€æœ¯ä¸ŠåŸºæœ¬ä¸Šå·²ç»ç©ä¸å‡ºä»€ä¹ˆæ–°çš„æœ‰æ„æ€çš„èŠ±æ ·äº†ï¼Œäºæ˜¯é€‰æ‹©äº† all in Linux kernel pwnï¼Œåªéœ€è¦ç”¨ QEMU å»è·‘è™šæ‹Ÿæœºï¼Œgdb å¯ä»¥ç›´æ¥è¿ä¸Š QEMU çš„ç«¯å£è¿›è¡Œè°ƒè¯•ï¼Œä¹Ÿä¸ä¾èµ–äºæŸäº›ç‰¹å®šçš„ glibc ç¯å¢ƒï¼ˆè™½ç„¶åé¢ç©è™šæ‹Ÿæœºé€ƒé€¸åˆç”¨åˆ°äº†ä¸è¿‡è¿™æ˜¯åè¯äº†ï¼‰ï¼Œäºæ˜¯å½“åˆæ­å»ºçš„å‡ ä¸ªç”¨æˆ·æ€ Pwn ç¯å¢ƒçš„è™šæ‹Ÿæœºå°±æ…¢æ…¢ç”¨ä¸åˆ°äº†ï¼Œ <em>ç°åœ¨å·²ç»è¢«ç¬”è€…é€ä¸€æ‰“åŒ…æ‰”åˆ°å¤‡ä»½ç¡¬ç›˜å½“ä¸­</em></p>
<p>è€Œåœ¨ 2023 å¹´çš„ä»Šå¤©ï¼Œç¬”è€…åˆæƒ³è¶ç€é—²æš‡æ—¶é—´å†ä¸šä½™å°ç©ä¸€ä¸‹ç”¨æˆ·æ€çš„ Pwnï¼ˆæ¯”èµ›å¤§æ¦‚ç‡ä¸ä¸€å®šä¼šä¸“é—¨æ‰“äº†ï¼Œæœ€å¤šå°±çœ‹åˆ° corCTF è¿™æ ·çš„ä¼˜è´¨æ¯”èµ›ä¼šå»åšåšä»–ä»¬çš„å†…æ ¸é¢˜ï¼Œä¸€äº›æ¯”è¾ƒæœ‰æ„æ€çš„çš„ç”¨æˆ·æ€ Pwn é¢˜æœ€å¤šå¯èƒ½èµ›åä¼šå¤ç°ä¹‹ç±»çš„ï¼‰ï¼Œé‚£ä¹ˆç¯å¢ƒä»¥åŠå„ç§ libcï¼ˆåŒ…æ‹¬ glibc ã€tclibcã€muslï¼Œ<del>ğŸ‘´å…¶å®æ²¡æƒ³æ˜ç™½ musl ä¸ºå•¥ä¼šåœ¨ CTF é‡Œæµè¡Œèµ·æ¥ï¼Œæ˜¯æ²¡æ´»äº†ğŸ</del>ï¼‰åˆé‡æ–°å˜ä¸ºç¬”è€…éœ€è¦é¢å¯¹çš„é—®é¢˜ä¹‹ä¸€ï¼Œè€Œå½¼æ—¶åŒæ—¶è·‘å¥½å‡ ä¸ªè™šæ‹Ÿæœºçš„è§£å†³æ–¹æ¡ˆæœªå…å¤ªè¿‡äºå°ä¸‘ğŸ¤¡ï¼Œå› æ­¤ç¬”è€…å†³å®šæ‰¾åˆ°ä¸€ä¸ªèƒ½å¤Ÿåœ¨ docker å½“ä¸­æ‰§è¡Œ <code>gdb.attach()</code> æ—¶ç›´æ¥åœ¨å®¿ä¸»æœºä¸­å¼¹å‡ºä¸€ä¸ªçª—å£çš„åŠæ³•</p>
<blockquote>
<p>å†™äº†è¿™ä¹ˆå¤šæ²¡ç”¨çš„æ‰¹è¯ï¼Œçªç„¶æ„Ÿè§‰è¿™ä¸€ç¯‡å…¶å®åº”è¯¥æ”¾åˆ° <a target="_blank" rel="noopener" href="https://arttnba3.cn/categories/PIECES/">PIECES</a> åˆ†ç±» è€Œé <a target="_blank" rel="noopener" href="https://arttnba3.cn/categories/OPS/">OPS</a> ï¼Œä½†ä»”ç»†æƒ³æƒ³å…¶å®ç¬”è€…çœŸæ­£è¦è®²çš„æ ¸å¿ƒå†…å®¹å…¶å®æ˜¯ docker çš„ä¸€ä¸ªå°çŸ¥è¯†ï¼Œæ‰€ä»¥è¿˜æ˜¯æ”¾ OPS åˆ†ç±»ä¸‹æˆ–è®¸ä¼šæ›´åŠ åˆé€‚ä¸€äº›</p>
</blockquote>
<h1 id="0x01-ä¸º-Docker-æ¥å…¥-Wayland-ç¯å¢ƒ"><a href="#0x01-ä¸º-Docker-æ¥å…¥-Wayland-ç¯å¢ƒ" class="headerlink" title="0x01. ä¸º Docker æ¥å…¥ Wayland ç¯å¢ƒ"></a>0x01. ä¸º Docker æ¥å…¥ Wayland ç¯å¢ƒ</h1><blockquote>
<p>ç¬”è€…æ‰€ç”¨çš„å›¾å½¢æœåŠ¡ä¸º Waylandï¼Œå› æ­¤æœ¬ç¯‡ä¸ä¼šè®² X11 è¯¥æ€ä¹ˆé…ç½®ï¼ˆæ¯•ç«Ÿå·²ç»æœ‰å¾ˆå¤šè®²è¿™ä¸ªçš„<a target="_blank" rel="noopener" href="https://gist.github.com/turekt/71f6950bc9f048daaeb69479845b672b">æ–‡ç« </a>äº†ï¼Œ<del>ï¼Œä»¥åŠéƒ½ä»€ä¹ˆå¹´ä»£äº†è¿˜åœ¨ç”¨ä¼ ç»Ÿå›¾å½¢æœåŠ¡</del>ï¼‰</p>
</blockquote>
<p>é…ç½®çš„åŠæ³•å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å¯åŠ¨å®¹å™¨æ—¶é¢å¤–æ·»åŠ ä¸€äº›å‚æ•°å³å¯ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker build -t pwnenv_ubuntu20 .</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker run -d -p <span class="hljs-string">&quot;2222:22&quot;</span> \</span><br><span class="language-bash">	--name=pwnenv_ubuntu20 \</span><br><span class="language-bash">	-e XDG_RUNTIME_DIR=/tmp \</span><br><span class="language-bash">	-e DISPLAY=<span class="hljs-variable">$DISPLAY</span> \</span><br><span class="language-bash">	-e WAYLAND_DISPLAY=<span class="hljs-variable">$WAYLAND_DISPLAY</span> \</span><br><span class="language-bash">	-v <span class="hljs-variable">$XDG_RUNTIME_DIR</span>/<span class="hljs-variable">$WAYLAND_DISPLAY</span>:/tmp/<span class="hljs-variable">$WAYLAND_DISPLAY</span> \</span><br><span class="language-bash">	-e QT_QPA_PLATFORM=wayland \</span><br><span class="language-bash">	pwnenv_ubuntu20</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p><del>åˆ«é—®ğŸ‘´è¿™äº›å‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè‡ªå·±æŸ¥å—·</del></p>
</blockquote>
<p>å¯åŠ¨ä¹‹åå®¹å™¨å…¶å®å°±å®Œæˆå¯¹ Wayland æœåŠ¡çš„æ¥å…¥äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•å†™ä¸€ä¸ª QT å°ç¨‹åºçœ‹çœ‹å®åŠ›ï¼š</p>
<p><img src="https://s2.loli.net/2023/10/25/bsER7NLVfD3Oq28.png" srcset="/img/loading.gif" lazyload alt="libEGL çš„æŠ¥é”™æ‡’å¾—ç®¡äº†ï¼Œåæ­£æ—¥å¸¸ä½¿ç”¨æ²¡å•¥å½±å“"></p>
<p>ç°åœ¨æˆ‘ä»¬çš„ docker å°±å·²ç»æˆåŠŸæ¥å…¥ Host ä¾§çš„å›¾å½¢æœåŠ¡äº†ï¼šï¼‰</p>
<h1 id="0x02-è®©-gdb-attach-å¼¹å‡ºä¸€ä¸ªæ–°çš„å›¾å½¢çª—å£"><a href="#0x02-è®©-gdb-attach-å¼¹å‡ºä¸€ä¸ªæ–°çš„å›¾å½¢çª—å£" class="headerlink" title="0x02. è®© gdb.attach() å¼¹å‡ºä¸€ä¸ªæ–°çš„å›¾å½¢çª—å£"></a>0x02. è®© gdb.attach() å¼¹å‡ºä¸€ä¸ªæ–°çš„å›¾å½¢çª—å£</h1><p>è¿™ä¸ªå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œç¬”è€…ç”¨çš„æ˜¯ KDE æ¡Œé¢ï¼Œæ‰€ä»¥å…ˆåœ¨å®¹å™¨é‡Œè£…ä¸€ä¸ª <code>konsole</code> ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ Gnome åˆ™å¯ä»¥è£…ä¸ª <code>gnome-terminal</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo apt install konsole</span><br></code></pre></td></tr></table></figure>

<p>ä¹‹ååœ¨ pwntools è°ƒç”¨ gdb ä¹‹å‰å°†å…¨å±€å˜é‡ <code>context.terminal</code> çš„å€¼è®¾ä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">context.terminal = [<span class="hljs-string">&#x27;konsole&#x27;</span>, <span class="hljs-string">&#x27;-e&#x27;</span>, <span class="hljs-string">&#x27;sh&#x27;</span>, <span class="hljs-string">&#x27;-c&#x27;</span>]<br></code></pre></td></tr></table></figure>

<p>ä¹‹åå°±èƒ½åƒè°ƒè¯•æœ¬åœ°åŸç”Ÿè¿›ç¨‹é‚£æ ·åœ¨è°ƒè¯• docker é‡Œçš„è¿›ç¨‹çš„æ—¶å€™å¼¹å‡ºä¸€ä¸ªæ–°çš„ gdb å›¾å½¢çª—å£äº† ï¼šï¼‰</p>
<p><img src="https://s2.loli.net/2023/10/25/fKS5bQUizjakCAr.jpg" srcset="/img/loading.gif" lazyload alt="yattaze"></p>
<h1 id="0xFF-Whatâ€™s-moreâ€¦"><a href="#0xFF-Whatâ€™s-moreâ€¦" class="headerlink" title="0xFF. Whatâ€™s moreâ€¦"></a>0xFF. Whatâ€™s moreâ€¦</h1><p>æœ€åç»™å‡ºä¸€ä¸ªç¬”è€…è‡ªç”¨çš„å¼€ç®±å³ç”¨çš„ docker pwn ç¯å¢ƒçš„ Dockerfileï¼Œæœ‰éœ€è¦çš„å¯ä»¥è‡ªå–ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span><br><br><span class="hljs-keyword">ARG</span> DEBIAN_FRONTEND=noninteractive<br><br><span class="hljs-comment"># pre-install softwares</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get -y update &amp;&amp; \</span><br><span class="language-bash">    apt-get install -y lib32z1 apt-transport-https python3 python3-pip git \</span><br><span class="language-bash">    libglib2.0-dev libfdt-dev libpixman-1-dev zlib1g-dev \</span><br><span class="language-bash">    vim nano netcat openssh-server unzip make wget bison flex build-essential \</span><br><span class="language-bash">    curl qemu qemu-system-x86 gcc gdb clang lldb tmux konsole</span><br><br><span class="hljs-comment"># enable ssh login</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">rm</span> -f /etc/service/sshd/down</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> sed -ri <span class="hljs-string">&#x27;s/^#?PermitRootLogin\s+.*/PermitRootLogin yes/&#x27;</span> /etc/ssh/sshd_config &amp;&amp;\</span><br><span class="language-bash">    sed -ri <span class="hljs-string">&#x27;s/#UseDNS\ no/UseDNS\ no/g&#x27;</span> /etc/ssh/sshd_config &amp;&amp; \</span><br><span class="language-bash">    sed -ri <span class="hljs-string">&quot;s/StrictModes yes/StrictModes no/g&quot;</span> /etc/ssh/sshd_config &amp;&amp; \</span><br><span class="language-bash">    sed -ri <span class="hljs-string">&quot;s/UsePAM yes/UsePAM no/g&quot;</span> /etc/ssh/sshd_config</span><br><br><span class="hljs-comment"># enable login with password</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;PasswordAuthentication yes&#x27;</span> &gt;&gt; /etc/ssh/sshd_config</span><br><br><span class="hljs-comment"># set username and password</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> groupadd arttnba3 &amp;&amp; \</span><br><span class="language-bash">    useradd -g arttnba3 arttnba3 -m -s /bin/bash &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;arttnba3:123456&quot;</span> | chpasswd &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;root:root123456&quot;</span> | chpasswd</span><br><br><span class="hljs-comment"># enable ssh key login</span><br><span class="hljs-comment">#RUN mkdir /home/arttnba3/.ssh &amp;&amp; \</span><br><span class="hljs-comment">#    echo &quot;Your ssh key&quot; &gt; /home/arttnba3/.ssh/authorized_keys</span><br><br><span class="hljs-comment"># keep container running</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;#!/bin/sh\nservice ssh restart\nsleep infinity&quot;</span> &gt; /root/start.sh</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">chmod</span> +x /root/start.sh</span><br><br><span class="hljs-comment"># enable sudo</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get install -y sudo &amp;&amp; \</span><br><span class="language-bash">       usermod -aG sudo arttnba3</span><br><br><span class="hljs-comment"># pwn-related tools</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> python3 -m pip config <span class="hljs-built_in">set</span> global.index-url http://pypi.tuna.tsinghua.edu.cn/simple &amp;&amp; \</span><br><span class="language-bash">    python3 -m pip config <span class="hljs-built_in">set</span> global.trusted-host pypi.tuna.tsinghua.edu.cn &amp;&amp; \</span><br><span class="language-bash">    python3 -m pip install -U pip &amp;&amp; \</span><br><span class="language-bash">    python3 -m pip install --no-cache-dir \</span><br><span class="language-bash">    pwntools \</span><br><span class="language-bash">    ropgadget \</span><br><span class="language-bash">    z3-solver \</span><br><span class="language-bash">    smmap2 \</span><br><span class="language-bash">    apscheduler \</span><br><span class="language-bash">    ropper \</span><br><span class="language-bash">    unicorn \</span><br><span class="language-bash">    keystone-engine \</span><br><span class="language-bash">    capstone \</span><br><span class="language-bash">    angr \</span><br><span class="language-bash">    pebble \</span><br><span class="language-bash">    r2pipe</span><br><br><span class="hljs-keyword">RUN</span><span class="language-bash"> git <span class="hljs-built_in">clone</span> https://github.com/pwndbg/pwndbg &amp;&amp; \</span><br><span class="language-bash">    <span class="hljs-built_in">cd</span> pwndbg &amp;&amp; <span class="hljs-built_in">chmod</span> +x setup.sh &amp;&amp; ./setup.sh</span><br><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/root/start.sh&quot;</span>]</span><br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">22</span><br><br></code></pre></td></tr></table></figure>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/OPS/" class="category-chain-item">OPS</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Linux/">#Linux</a>
      
        <a href="/tags/%E8%BF%90%E7%BB%B4/">#è¿ç»´</a>
      
        <a href="/tags/Docker/">#Docker</a>
      
        <a href="/tags/GUI/">#GUI</a>
      
        <a href="/tags/Wayland/">#Wayland</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ã€OPS.0x01ã€‘ä¸º Docker è¿æ¥ Wayland å›¾å½¢ç¯å¢ƒ</div>
      <div>https://arttnba3.github.io/2023/10/25/OPS-0X01-DOCKER_WAYLAND_GUI/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>arttnba3</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´10æœˆ25æ—¥</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/10/27/PAPER-0X04-HYPER_CUBE/" title="ã€PAPER.0x04ã€‘è®ºæ–‡ç¬”è®°ï¼šHYPER-CUBE: High-Dimensional Hypervisor Fuzzing">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ã€PAPER.0x04ã€‘è®ºæ–‡ç¬”è®°ï¼šHYPER-CUBE: High-Dimensional Hypervisor Fuzzing</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/09/27/FUZZ-0X03-SYZKALLER-III_SOURCE_SYZFUZZER/" title="ã€FUZZ.0x03ã€‘syzkaller - IIIï¼šsyz-fuzzer æºç åˆ†æ">
                        <span class="hidden-mobile">ã€FUZZ.0x03ã€‘syzkaller - IIIï¼šsyz-fuzzer æºç åˆ†æ</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.4.17/Valine.min.js', function() {
        var options = Object.assign(
          {"appid":"ICj6cPRQWFTNiOttBHlzxnIv-gzGzoHsz","appkey":"tuvJh3xYxPFcW2JB6K26RKP2","path":"window.location.pathname","placeholder":"è¯´ç‚¹ä»€ä¹ˆå‘—ï¼ˆç¬‘ï¼‰","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false,"appId":"ICj6cPRQWFTNiOttBHlzxnIv-gzGzoHsz","appKey":"tuvJh3xYxPFcW2JB6K26RKP2"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  <!-- ç½‘ç«™è¿è¡Œæ—¶é—´çš„è®¾ç½® -->
  <span id="timeDate">è½½å…¥å¤©æ•°...</span>
  <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
  <script>
      var now = new Date();
      function createtime() {
          var grt= new Date("04/20/2020 17:48:48");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
          now.setTime(now.getTime()+250);
          days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
          hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
          if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
          mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
          seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
          snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
          document.getElementById("timeDate").innerHTML = "arttnba3çš„å°å±‹å·²ç»å®‰å…¨å­˜åœ¨äº† "+dnum+" å¤© ";
          document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";
      }
  setInterval("createtime()",250);
  </script>
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.1/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
